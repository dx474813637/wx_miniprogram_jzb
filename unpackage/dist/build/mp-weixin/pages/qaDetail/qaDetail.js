(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/qaDetail/qaDetail"],{"0b6a":function(t,e,n){"use strict";n.r(e);var o=n("a170"),i=n("f3c8");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("e472");var a,u=n("f0c5"),s=Object(u["a"])(i["default"],o["b"],o["c"],!1,null,"f4133a92",null,!1,o["a"],a);e["default"]=s.exports},"574e":function(t,e,n){},6324:function(t,e,n){"use strict";(function(t){n("ba0c");o(n("66fd"));var e=o(n("0b6a"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"8e64":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n("a34a")),i=n("6c7e");function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n,o,i,r,a){try{var u=t[r](a),s=u.value}catch(c){return void n(c)}u.done?e(s):Promise.resolve(s).then(o,i)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var r=t.apply(e,n);function u(t){a(r,o,i,u,s,"next",t)}function s(t){a(r,o,i,u,s,"throw",t)}u(void 0)}))}}var s=function(){Promise.all([n.e("common/vendor"),n.e("components/QADetailList/QADetailList")]).then(function(){return resolve(n("0c67"))}.bind(null,n)).catch(n.oe)},c=function(){Promise.all([n.e("common/vendor"),n.e("components/QAUserProfile/QAUserProfile")]).then(function(){return resolve(n("48d4"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("components/QAReply/QAReply").then(function(){return resolve(n("8fb4"))}.bind(null,n)).catch(n.oe)},d=function(){Promise.all([n.e("common/vendor"),n.e("components/shareModal/shareModal")]).then(function(){return resolve(n("b4f7"))}.bind(null,n)).catch(n.oe)},f=function(){Promise.all([n.e("common/vendor"),n.e("components/rzSelectModal/rzSelectModal")]).then(function(){return resolve(n("262d"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("components/skeleton/index").then(function(){return resolve(n("bc5b"))}.bind(null,n)).catch(n.oe)},p={mixins:[i.sharePage],data:function(){return{uid:"",detailApi:"",replyApi:"",type:0,qList:{},authorInfo:{},answerList:[],replyList:[],author_follow:0,customStyle:{fontWeight:"bold"},replyShow:!1,shareShow:!1,rzModalShow:!1,collection:0,like:0,repList:"",load:!0,options:{},pxList:["倒序","正序"],pxIndex:0}},components:{QADetailList:s,QAUserProfile:c,QAReply:l,rzSelectModal:f,shareModal:d,Skeleton:h},onLoad:function(t){var e=this;return u(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.id&&(e.uid=t.id),t.type&&(e.type=t.type||0,e.detailApi=1==e.type?"/Home/Jzbxcx/viewpoint_detail":"/Home/Jzbxcx/questions_detail",e.replyApi=1==e.type?"/Home/Jzbxcx/reply_viewpoint":"/Home/Jzbxcx/add_questions_comment");case 2:case"end":return n.stop()}}),n)})))()},onShow:function(){var t=this;return u(o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.renderList();case 1:case"end":return e.stop()}}),e)})))()},computed:{answerNum:function(){return this.answerList.length},repPerson:function(){return this.qList.title||this.authorInfo.name},urlFlag:function(){return!!this.qList.url&&0!=this.qList.url.indexOf("原因")}},methods:{getData:function(){var t=this;return u(o.default.mark((function e(){var n;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.detailApi,e.next=3,t.$https.get(n,{params:{id:t.uid}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},renderList:function(){var e=this;return u(o.default.mark((function n(){var i,r,a;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.showLoading({title:"加载中",mask:!0}),n.next=3,e.getData();case 3:i=n.sent,e.qList=i.data.list,e.authorInfo=i.data.user_info,e.author_follow=i.data.follow,e.collection=i.data.collection,1==e.type?e.replyList=i.data.reply_list:0==e.type&&(e.replyList=i.data.comment.filter((function(t){return 0==t.cate})).map((function(t){var e=t.uptime;return e=e.replace(new RegExp("-","gm"),"/"),t.time=new Date(e).getTime(),t})),e.answerList=i.data.answer.filter((function(t){return 2==t.zt})).map((function(t){var n=t.id,o=i.data.comment.filter((function(t){return t.cate==n}));return t.rList=o,o.length>3&&(t.showMoreRep=!0),t.goods=0==o.filter((function(t){return t.intro==e.$store.state.goodStr&&t.poster==e.$store.state.infoAuthorize.poster})).length?0:1,t}))),r=1==e.type?e.qList.uptime:e.qList.post_time,a=1==e.type?"发声":"采访提问",e.options={title:"网经社".concat(a,"海报"),posterImgUrl:e.authorInfo.pic,name:e.authorInfo.name,label:e.authorInfo.type,sub:e.authorInfo.title||e.authorInfo.company,contentTitle:"".concat(e.authorInfo.name,"于").concat(r).concat(1==e.type?a:"发布"+a).concat(e.qList.title,"："),contentText:e.qList.intro,curPageUrl:getCurrentPages()[getCurrentPages().length-1]["$page"].fullPath.slice(1)},e.load=!1,t.hideLoading();case 14:case"end":return n.stop()}}),n)})))()},handleFollow:function(t){var e=this;return u(o.default.mark((function t(){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.renderList();case 1:case"end":return t.stop()}}),t)})))()},handleReplyBtn:function(){if(!this.analysisReg())return!1;"2"==this.$store.state.infoAuthorize.auth_status?this.handleShowReply():this.handleShowRzBox()},handleShare:function(){this.shareShow=!this.shareShow},handleShareBtn:function(){},handleShowReply:function(){this.replyShow=!this.replyShow},handleShowRzBox:function(){this.rzModalShow=!this.rzModalShow},handleReply:function(e){var n=this;return u(o.default.mark((function i(){var r;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return t.showLoading({title:"评论提交中...",mask:!0}),o.next=3,n.$https.get(n.replyApi,{params:{id:n.uid,intro:e,title:"reply_title"}});case 3:r=o.sent,t.hideLoading(),1==r.data.code&&(t.showToast({title:"评论成功",icon:"success",duration:1e3}),setTimeout((function(){n.renderList()})));case 6:case"end":return o.stop()}}),i)})))()},collectionEvent:function(t){var e=this;return u(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$https.get(t,{params:{id:e.uid,cate:1==e.type?2:1}});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},analysisReg:function(){return!!this.$store.state.phoneReg||(t.navigateTo({url:"/pagesPersonal/wxAuthorize/wxAuthorize?phone=1"}),!1)},handleCollection:function(){var e=this;return u(o.default.mark((function n(){var i,r;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.analysisReg()){n.next=2;break}return n.abrupt("return",!1);case 2:return i=1==e.collection?"/Home/Jzbxcx/cancel_collection":"/Home/Jzbxcx/add_collection",n.next=5,e.collectionEvent(i);case 5:r=n.sent,1==r.data.code&&(e.collection=1-e.collection,t.showToast({title:e.collection?"收藏成功":"取消收藏",icon:"success",duration:1e3}));case 7:case"end":return n.stop()}}),n)})))()},handleReportBtn:function(){if(!this.analysisReg())return!1;t.navigateTo({url:"/pages/ideaFeed/ideaFeed?cate=".concat(Number(this.type)+1,"&tid=").concat(this.qList.id)})},handleUpdateRepList:function(t){this.repList=t},handleChangePx:function(){var e=this;t.showActionSheet({itemList:this.pxList,success:function(t){e.pxIndex=t.tapIndex,e.replyList=e.replyList.sort((function(t,n){return e.pxIndex?t.time-n.time:n.time-t.time}))}})},setClipboard:function(e){t.setClipboardData({data:e,success:function(){t.showToast({title:"复制成功"})}})}}};e.default=p}).call(this,n("543d")["default"])},a170:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}));var o={uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"b288"))},uIcon:function(){return n.e("uview-ui/components/u-icon/u-icon").then(n.bind(null,"230a"))},uLink:function(){return n.e("uview-ui/components/u-link/u-link").then(n.bind(null,"15b1"))}},i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.qList.post_time||t.qList.uptime?t._f("timeFilter")(t.qList.post_time||t.qList.uptime):null);t.$mp.data=Object.assign({},{$root:{f0:n}})},r=[]},e472:function(t,e,n){"use strict";var o=n("574e"),i=n.n(o);i.a},f3c8:function(t,e,n){"use strict";n.r(e);var o=n("8e64"),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a}},[["6324","common/runtime","common/vendor"]]]);