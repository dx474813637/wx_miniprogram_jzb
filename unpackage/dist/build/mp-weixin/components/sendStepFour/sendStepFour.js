(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/sendStepFour/sendStepFour"],{"0a64":function(e,n,t){"use strict";t.r(n);var r=t("68d9"),u=t.n(r);for(var o in r)"default"!==o&&function(e){t.d(n,e,(function(){return r[e]}))}(o);n["default"]=u.a},"68d9":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,u=o(t("a34a"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,n,t,r,u,o,i){try{var a=e[o](i),s=a.value}catch(c){return void t(c)}a.done?n(s):Promise.resolve(s).then(r,u)}function a(e){return function(){var n=this,t=arguments;return new Promise((function(r,u){var o=e.apply(n,t);function a(e){i(o,r,u,a,s,"next",e)}function s(e){i(o,r,u,a,s,"throw",e)}a(void 0)}))}}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var c=function(){Promise.all([t.e("common/vendor"),t.e("components/QAUserProfile/QAUserProfile")]).then(function(){return resolve(t("48d4"))}.bind(null,t)).catch(t.oe)},l={props:{qid:{type:Number|String,default:0},qData:{type:Object,default:function(){return{}}}},data:function(){return{value:0,show:!1,errorType:["message"],answerList:[],form:{url:"",isApply:!1,yy:""},rules:{},apply:!1,customStyle:{fontSize:"28rpx"}}},created:function(){this.renderData(this.qData)},components:{QAUserProfile:c},watch:(r={},s(r,"form.isApply",(function(e){this.apply=e})),s(r,"qData",(function(e){this.renderData(e)})),r),computed:{setScoreBtn:function(){var e=!1;return this.answerList.forEach((function(n){n.disabled||0==n.score_answer||(e=!0)})),e}},methods:{setAnswerScore:function(e,n){var t=this;return a(u.default.mark((function r(){return u.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$https.get("/Home/Jzbxcx/answer_score",{params:{id:e,score:n}});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},setAllScore:function(){var n=this;return a(u.default.mark((function t(){var r,o,i;return u.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=n.answerList.map((function(e){return n.setAnswerScore(e.id,e.score_answer)})),t.next=3,Promise.all(r);case 3:o=t.sent,i=o.map((function(e){return e.data.code})),i.includes(2)?e.showToast({title:"操作失败",icon:"none"}):(e.showToast({title:"评价成功！"}),n.$emit("end-q")),console.log(o);case 7:case"end":return t.stop()}}),t)})))()},renderData:function(e){0!=Object.keys(e).length&&(this.answerList=e.answer.filter((function(e){return e.disabled=0!=e.score_answer,2==e.zt&&e.intro})),e.list.url&&(0!=e.list.url.indexOf("原因")?this.$set(this.form,"url",e.list.url):(this.$set(this.form,"isApply",!0),this.$set(this.form,"yy",e.list.url.slice(2)))))},handleConfirm:function(e){this.form.yy=e[0].label},endQuestion:function(){var n=this;return a(u.default.mark((function t(){var r;return u.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.form.url||n.form.isApply){t.next=3;break}return e.showToast({title:"请填写稿件地址或勾选申请免链接提交！",icon:"none"}),t.abrupt("return");case 3:return e.showLoading({title:"提交中",mask:!0}),t.next=6,n.handleUpUrl();case 6:r=t.sent,e.hideLoading(),1==r.data.code&&(n.$emit("end-q"),e.showModal({title:"提示",content:"提交成功，是否返回采访列表",success:function(n){n.confirm?e.navigateBack():n.cancel&&console.log("用户点击取消")}}));case 9:case"end":return t.stop()}}),t)})))()},handleUpUrl:function(){var e=this;return a(u.default.mark((function n(){var t;return u.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=e.form.url||"原因"+e.form.yy,n.next=3,e.$https.get("/Home/Jzbxcx/add_questions_url",{params:{id:e.qid,url:t}});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},handleReturn:function(){this.$emit("change-step",2)}}};n.default=l}).call(this,t("543d")["default"])},"6ce49":function(e,n,t){"use strict";t.r(n);var r=t("a3b4"),u=t("0a64");for(var o in u)"default"!==o&&function(e){t.d(n,e,(function(){return u[e]}))}(o);t("e535");var i,a=t("f0c5"),s=Object(a["a"])(u["default"],r["b"],r["c"],!1,null,"275223e2",null,!1,r["a"],i);n["default"]=s.exports},a3b4:function(e,n,t){"use strict";t.d(n,"b",(function(){return u})),t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){return r}));var r={uForm:function(){return t.e("uview-ui/components/u-form/u-form").then(t.bind(null,"55d8"))},uIcon:function(){return t.e("uview-ui/components/u-icon/u-icon").then(t.bind(null,"230a"))},uRate:function(){return t.e("uview-ui/components/u-rate/u-rate").then(t.bind(null,"55ec"))},uButton:function(){return t.e("uview-ui/components/u-button/u-button").then(t.bind(null,"b288"))},uFormItem:function(){return Promise.all([t.e("common/vendor"),t.e("uview-ui/components/u-form-item/u-form-item")]).then(t.bind(null,"1d38"))},uInput:function(){return Promise.all([t.e("common/vendor"),t.e("uview-ui/components/u-input/u-input")]).then(t.bind(null,"da43"))},uCheckbox:function(){return t.e("uview-ui/components/u-checkbox/u-checkbox").then(t.bind(null,"7946"))}},u=function(){var e=this,n=e.$createElement;e._self._c},o=[]},a7e7:function(e,n,t){},e535:function(e,n,t){"use strict";var r=t("a7e7"),u=t.n(r);u.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/sendStepFour/sendStepFour-create-component',
    {
        'components/sendStepFour/sendStepFour-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("6ce49"))
        })
    },
    [['components/sendStepFour/sendStepFour-create-component']]
]);
