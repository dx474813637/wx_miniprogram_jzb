{"version":3,"sources":["webpack:///F:/hbuild-item/jzb/pages/searchRes/searchRes.vue?4d8e","webpack:///F:/hbuild-item/jzb/pages/searchRes/searchRes.vue?b48d","webpack:///F:/hbuild-item/jzb/pages/searchRes/searchRes.vue?9320","webpack:///F:/hbuild-item/jzb/pages/searchRes/searchRes.vue?885f","uni-app:///pages/searchRes/searchRes.vue","webpack:///F:/hbuild-item/jzb/pages/searchRes/searchRes.vue?2a96","uni-app:///main.js"],"names":["renderjs","component","options","__file","components","uSearch","uSticky","uTabs","uIcon","uEmpty","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","createPage","Page"],"mappings":";;;;2DAAA,yTACIA,EADJ,wJASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,gCACZ,aAAAF,E;;;;2GCvBf,4iC;;;;2GCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,QAAS,WACP,OAAO,8KAITC,QAAS,WACP,OAAO,8KAITC,MAAO,WACL,OAAO,kKAITC,MAAO,WACL,OAAO,kKAITC,OAAQ,WACN,OAAO,yKAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G;;;;2DCrDvB,6qBAAsnB,eAAG,G;;;;0wFCiFznB,CACA,KADA,WAEA,OACA,MACA,UACA,SACA,CACA,UACA,YAEA,CACA,UACA,QACA,YACA,iBAEA,CACA,UACA,QACA,YACA,kBAEA,CACA,UACA,QACA,QACA,YACA,aAEA,CACA,UACA,QACA,QACA,YACA,aAEA,CACA,UACA,QACA,QACA,YACA,cAGA,UACA,CACA,QACA,YAEA,CACA,QACA,IACA,WACA,YAEA,CACA,QACA,IACA,WACA,aAGA,SACA,SACA,SACA,UACA,YACA,CACA,QACA,IACA,WACA,YAEA,CACA,QACA,IACA,WACA,YAEA,CACA,QACA,IACA,WACA,eAKA,OAxFA,SAwFA,GACA,aACA,qBAEA,OACA,QADA,SACA,GACA,yBAGA,YACA,iBAEA,UACA,WADA,WAGA,sCACA,aACA,kCACA,0DACA,wBACA,8BAEA,cACA,wDACA,wBACA,yBAEA,WAGA,cAtHA,WAsHA,wIACA,aADA,oDAEA,4BACA,cACA,8BAJA,oBAKA,8CACA,UANA,oDAOA,OACA,uBACA,cATA,kCASA,2BATA,WAUA,eAVA,kCAUA,2BAVA,QAWA,uBAXA,2BAcA,UAdA,oBAeA,4CACA,sBAhBA,0DAiBA,OACA,uBAlBA,UAmBA,wBAnBA,QAoBA,uBApBA,+CAwBA,SACA,gBADA,WACA,kIACA,kCADA,iEAEA,sDACA,YAHA,OAEA,EAFA,OAKA,iBACA,6BANA,8CAUA,mBAXA,SAWA,6IACA,6BADA,SAEA,8GAFA,OAEA,EAFA,OAGA,iBACA,EADA,YACA,sBADA,EACA,cACA,iCACA,uEANA,8CAUA,YArBA,SAqBA,GACA,iDACA,gBACA,MACA,cAEA,aACA,0CAEA,SA9BA,WA8BA,WACA,qCACA,qBACA,QACA,IACA,WACA,gBAKA,uCACA,uBACA,QACA,IACA,WACA,gBAMA,kCACA,wBAGA,aAxDA,SAwDA,qIACA,cACA,oBACA,EAHA,wDAIA,eACA,cAEA,GACA,aAGA,iBAXA,SAaA,sBAbA,wBAcA,yBAdA,yBAeA,2BAfA,yBAgBA,2BAhBA,QAiBA,gBACA,gBAlBA,+CAoBA,OA5EA,SA4EA,8IACA,2BADA,sFAGA,WA/EA,SA+EA,GACA,gBAEA,YAlFA,WAmFA,gBACA,2CACA,cACA,cACA,OAEA,oCACA,oCACA,oCACA,yEACA,qEACA,2DACA,2DACA,2DACA,2DACA,2DACA,gBACA,4DAGA,oBAvGA,SAuGA,0JACA,aACA,gGACA,gGACA,kGAJA,yBACA,EADA,KACA,EADA,KACA,EADA,KAMA,sBACA,sBACA,sBARA,+CAUA,UAjHA,SAiHA,KACA,kDACA,2CAEA,iBArHA,SAqHA,kJACA,uDADA,OACA,EADA,OAEA,gBACA,yCAHA,8CAMA,sBA3HA,SA2HA,oJACA,yEADA,OACA,EADA,OAEA,iBACA,+BACA,yDAEA,OADA,wCACA,KAEA,mFACA,4BATA,8CAYA,sBAvIA,SAuIA,oJACA,yEADA,OACA,EADA,OAEA,iBACA,+BAEA,OADA,qBACA,KAEA,kEACA,4BARA,8CAWA,gBAlJA,WAkJA,WACA,cACA,kFACA,oBACA,+E;;;;2DCrXA,isCAAmpC,eAAG,G;;;;;;;;wECAtpC,qBACA,sBACA,kD,mDACAC,EAAWC,a","file":"pages/searchRes/searchRes.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./searchRes.vue?vue&type=template&id=ee20fa10&scoped=true&\"\nvar renderjs\nimport script from \"./searchRes.vue?vue&type=script&lang=js&\"\nexport * from \"./searchRes.vue?vue&type=script&lang=js&\"\nimport style0 from \"./searchRes.vue?vue&type=style&index=0&id=ee20fa10&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ee20fa10\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/searchRes/searchRes.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./searchRes.vue?vue&type=template&id=ee20fa10&scoped=true&\"","var components\ntry {\n  components = {\n    uSearch: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-search/u-search\" */ \"@/uview-ui/components/u-search/u-search.vue\"\n      )\n    },\n    uSticky: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-sticky/u-sticky\" */ \"@/uview-ui/components/u-sticky/u-sticky.vue\"\n      )\n    },\n    uTabs: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-tabs/u-tabs\" */ \"@/uview-ui/components/u-tabs/u-tabs.vue\"\n      )\n    },\n    uIcon: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-icon/u-icon\" */ \"@/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uEmpty: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-empty/u-empty\" */ \"@/uview-ui/components/u-empty/u-empty.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./searchRes.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./searchRes.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"s\">\r\n\t\t<view class=\"s-w\">\r\n\t\t\t<u-search \r\n\t\t\t\tplaceholder=\"请输入关键词\" \r\n\t\t\t\tv-model=\"kw\"\r\n\t\t\t\tshape=\"round\"\r\n\t\t\t\t:show-action=\"false\"\r\n\t\t\t\t:animation=\"true\"\r\n\t\t\t\t@search=\"handleSearch(true)\"\r\n\t\t\t></u-search>\r\n\t\t</view>\r\n\t\t<view class=\"res\">\r\n\t\t\t<u-sticky>\r\n\t\t\t\t<u-tabs\r\n\t\t\t\t\t:list=\"navList\" \r\n\t\t\t\t\t:is-scroll=\"false\" \r\n\t\t\t\t\t:current=\"current\" \r\n\t\t\t\t\t:show-bar=\"false\"\r\n\t\t\t\t\t@change=\"tabsChange\"\r\n\t\t\t\t></u-tabs>\r\n\t\t\t</u-sticky>\r\n\t\t\t<template v-if=\"cpyRes.name && current == 0\">\r\n\t\t\t\t<view class=\"card-box\">\r\n\t\t\t\t\t<view class=\"icard\">\r\n\t\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t\t<view class=\"title-item item-main\">企业&平台</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"content\" @click=\"handleToWebview\">\r\n\t\t\t\t\t\t\t<view class=\"cpy-info\">\r\n\t\t\t\t\t\t\t\t<view class=\"cpy-name\">\r\n\t\t\t\t\t\t\t\t\t{{cpyRes.name}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"cpy-main\">\r\n\t\t\t\t\t\t\t\t\t{{cpyRes.shares}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"cpy-icon\">\r\n\t\t\t\t\t\t\t\t\t<u-icon name=\"youjiantou\" size=\"28\" color=\"#999999\" custom-prefix=\"custom-icon\"></u-icon>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"cpy-info\">\r\n\t\t\t\t\t\t\t\t<view class=\"cpy-content\">\r\n\t\t\t\t\t\t\t\t\t{{cpyRes.a103}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t</template>\r\n\t\t\t\r\n\t\t\t<view\r\n\t\t\t\tv-for=\"(item, index) in navList\"\r\n\t\t\t\t:key=\"index\"\r\n\t\t\t\t:class=\"{'hide': current != 0 && current != index}\"\r\n\t\t\t>\r\n\t\t\t\t<search-res-list\r\n\t\t\t\t\t:index=\"current\"\r\n\t\t\t\t\t:list=\"dataList[item.dataIndex].data\"\r\n\t\t\t\t\t:typeIndex=\"index\"\r\n\t\t\t\t\t:type=\"navList[index].type\"\r\n\t\t\t\t\t:val=\"navList[index].value\"\r\n\t\t\t\t\t:label=\"navList[index].name\"\r\n\t\t\t\t\t:all-user-res=\"allUserRes[navList[index].value]\"\r\n\t\t\t\t\t@change-current=\"tabsChange\"\r\n\t\t\t\t\t:load-status=\"loadStatus\"\r\n\t\t\t\t></search-res-list>\r\n\t\t\t\t\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<template v-if=\"current == 0 && navList[0].count == 0\">\r\n\t\t\t\t<u-empty text=\"没有搜索结果\" mode=\"search\" margin-top=\"80\"></u-empty>\r\n\t\t\t</template>\r\n\t\t\t\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport searchResList from '@/components/searchResList/searchResList'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tkw: '',\r\n\t\t\t\tcurrent: 0,\r\n\t\t\t\tnavList: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '全部',\r\n\t\t\t\t\t\tcount: null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '提问',\r\n\t\t\t\t\t\tcount: 0,\r\n\t\t\t\t\t\tdataIndex: 1,\r\n\t\t\t\t\t\ttype: 'question'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '发声',\r\n\t\t\t\t\t\tcount: 0,\r\n\t\t\t\t\t\tdataIndex: 2,\r\n\t\t\t\t\t\ttype: 'viewpoint'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '专家',\r\n\t\t\t\t\t\tvalue: 1,\r\n\t\t\t\t\t\tcount: 0,\r\n\t\t\t\t\t\tdataIndex: 0,\r\n\t\t\t\t\t\ttype: 'user'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '记者',\r\n\t\t\t\t\t\tvalue: 0,\r\n\t\t\t\t\t\tcount: 0,\r\n\t\t\t\t\t\tdataIndex: 0,\r\n\t\t\t\t\t\ttype: 'user'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '公关',\r\n\t\t\t\t\t\tvalue: 2,\r\n\t\t\t\t\t\tcount: 0,\r\n\t\t\t\t\t\tdataIndex: 0,\r\n\t\t\t\t\t\ttype: 'user'\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\tdataList: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdata: [], //user\r\n\t\t\t\t\t\tloading: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdata: [], //q\r\n\t\t\t\t\t\tp: 1,\r\n\t\t\t\t\t\tendFlag: false,\r\n\t\t\t\t\t\tloading: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdata: [], //vp\r\n\t\t\t\t\t\tp: 1,\r\n\t\t\t\t\t\tendFlag: false,\r\n\t\t\t\t\t\tloading: false\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\tuList: [],\r\n\t\t\t\tqList: [],\r\n\t\t\t\tfList: [],\r\n\t\t\t\tcpyRes: {},\r\n\t\t\t\tallUserRes: [\r\n\t\t\t\t\t{ \r\n\t\t\t\t\t\tlist:[],\r\n\t\t\t\t\t\tp: 1,\r\n\t\t\t\t\t\tendFlag: false,\r\n\t\t\t\t\t\tloading: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{ \r\n\t\t\t\t\t\tlist:[],\r\n\t\t\t\t\t\tp: 1,\r\n\t\t\t\t\t\tendFlag: false,\r\n\t\t\t\t\t\tloading: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{ \r\n\t\t\t\t\t\tlist:[],\r\n\t\t\t\t\t\tp: 1,\r\n\t\t\t\t\t\tendFlag: false,\r\n\t\t\t\t\t\tloading: false\r\n\t\t\t\t\t},\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t},\r\n\t\tonLoad(opt) {\r\n\t\t\tthis.kw = opt.kw\r\n\t\t\tthis.handleSearch()\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tcurrent(newV) {\r\n\t\t\t\tthis.handleSearchCpy()\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tsearchResList\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tloadStatus() {\r\n\t\t\t\t\r\n\t\t\t\tlet type = this.navList[this.current].type\r\n\t\t\t\tlet status = 'loadmore'\r\n\t\t\t\tif(type == 'question' || type == 'viewpoint' ) {\r\n\t\t\t\t\tlet item = this.dataList[this.navList[this.current].dataIndex]\r\n\t\t\t\t\tif(item.endFlag) status = 'nomore'\r\n\t\t\t\t\tif(item.loading) status = 'loading' \r\n\t\t\t\t}\r\n\t\t\t\telse if(type == 'user') {\r\n\t\t\t\t\tlet item = this.allUserRes[this.navList[this.current].value]\r\n\t\t\t\t\tif(item.endFlag) status = 'nomore'\r\n\t\t\t\t\tif(item.loading) status = 'loading' \r\n\t\t\t\t}\r\n\t\t\t\treturn status\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync onReachBottom() {\r\n\t\t\tif(this.current == 0 ) return \r\n\t\t\tlet type = this.navList[this.current].type\r\n\t\t\tlet keywords = this.kw.trim()\r\n\t\t\tif(type == 'question' || type == 'viewpoint' ) {\r\n\t\t\t\tlet item = this.dataList[this.navList[this.current].dataIndex]\r\n\t\t\t\tif(item.endFlag) return\r\n\t\t\t\titem.p += 1\r\n\t\t\t\tthis.$set(item, 'loading', true)\r\n\t\t\t\tif(type == 'question') await this.handleSearchQuestions(keywords)\r\n\t\t\t\tif(type == 'viewpoint') await this.handleSearchViewpoint(keywords)\r\n\t\t\t\tthis.$set(item, 'loading', false)\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\telse if(type == 'user') {\r\n\t\t\t\tlet item = this.allUserRes[this.navList[this.current].value]\r\n\t\t\t\tif(item.endFlag || item.loading) return\r\n\t\t\t\titem.p += 1\r\n\t\t\t\tthis.$set(item, 'loading', true)\r\n\t\t\t\tawait this.handleNextUserPage(keywords)\r\n\t\t\t\tthis.$set(item, 'loading', false)\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync handleSearchCpy() {\r\n\t\t\t\tif(this.kw == this.cpyRes.name || this.current != 0 ) return\r\n\t\t\t\tlet res = await this.$https.post('/Home/Jzbxcx/new_data_json?dataid=13', {\r\n\t\t\t\t\tname: this.kw\r\n\t\t\t\t})\r\n\t\t\t\tif(res.data.code == 1) {\r\n\t\t\t\t\tthis.cpyRes = res.data.list[0] || {}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tasync handleNextUserPage(name) {\r\n\t\t\t\tlet val = this.navList[this.current].value\r\n\t\t\t\tlet res = await this.$https.get(`/Home/Jzbxcx/ku_list?cate=${val+1}&keywords=${name}&p=${this.allUserRes[val].p}`)\r\n\t\t\t\tif(res.data.code == 1) {\r\n\t\t\t\t\tlet data = [...this.allUserRes[val].list, ...res.data.list]\r\n\t\t\t\t\tthis.$set(this.allUserRes[val], 'list', data)\r\n\t\t\t\t\tif(res.data.pages == this.allUserRes[val].p) this.$set(this.allUserRes[val], 'endFlag', true)\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\thandleStore(keywords) {\r\n\t\t\t\tlet arr = uni.getStorageSync('jzb_search_history') || []\r\n\t\t\t\tlet index = arr.indexOf(keywords)\r\n\t\t\t\tif(index != -1) {\r\n\t\t\t\t\tarr.splice(index, 1)\r\n\t\t\t\t}\r\n\t\t\t\tarr.unshift(keywords)\r\n\t\t\t\tuni.setStorageSync('jzb_search_history', arr)\r\n\t\t\t},\r\n\t\t\tdataInit() {\r\n\t\t\t\tthis.dataList.forEach((ele, index) => {\r\n\t\t\t\t\tthis.$set(this.dataList, index, {\r\n\t\t\t\t\t\tdata:[],\r\n\t\t\t\t\t\tp: 1,\r\n\t\t\t\t\t\tendFlag: false,\r\n\t\t\t\t\t\tloading: false,\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// this.$set(ele, 'data', [])\r\n\t\t\t\t\t// this.$set(ele, 'p', 1)\r\n\t\t\t\t})\r\n\t\t\t\tthis.allUserRes.forEach((ele, index) => {\r\n\t\t\t\t\tthis.$set(this.allUserRes, index, {\r\n\t\t\t\t\t\tlist:[],\r\n\t\t\t\t\t\tp: 1,\r\n\t\t\t\t\t\tendFlag: false,\r\n\t\t\t\t\t\tloading: false,\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// this.$set(ele, 'list', [])\r\n\t\t\t\t\t// this.$set(ele, 'p', 1)\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tthis.navList.forEach(ele => {\r\n\t\t\t\t\tthis.$set(ele, 'count', 0)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync handleSearch(flag) {\r\n\t\t\t\tlet keywords = this.kw.trim()\r\n\t\t\t\tthis.handleSearchCpy()\r\n\t\t\t\tif(!keywords) return\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '搜索中'\r\n\t\t\t\t})\r\n\t\t\t\tif(flag) {\r\n\t\t\t\t\tthis.dataInit()\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.handleStore(keywords)\r\n\t\t\t\t\r\n\t\t\t\tawait this.handleSearchUser(keywords)\r\n\t\t\t\tawait this.handleSearchUserAll(keywords)\r\n\t\t\t\tawait this.handleSearchQuestions(keywords)\r\n\t\t\t\tawait this.handleSearchViewpoint(keywords)\r\n\t\t\t\tthis.handleCount()\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t},\r\n\t\t\tasync search(api, params) {\r\n\t\t\t\treturn await this.$https.get(api, {params})\r\n\t\t\t},\r\n\t\t\ttabsChange(index) {\r\n\t\t\t\tthis.current = index\r\n\t\t\t},\r\n\t\t\thandleCount() {\r\n\t\t\t\tlet jz_num = 0, zj_num = 0, pr_num = 0\r\n\t\t\t\tthis.dataList[0].data.forEach(ele => {\r\n\t\t\t\t\tif(ele.type == 0) jz_num++\r\n\t\t\t\t\telse if(ele.type == 1) zj_num++\r\n\t\t\t\t\telse pr_num++\r\n\t\t\t\t})\r\n\t\t\t\tjz_num += Number(this.allUserRes[0].count)\r\n\t\t\t\tzj_num += Number(this.allUserRes[1].count)\r\n\t\t\t\tpr_num += Number(this.allUserRes[2].count)\r\n\t\t\t\tlet q_num = this.dataList[1].data.reduce((sum, cur)=> {return sum+cur.length}, 0)\r\n\t\t\t\tlet v_num = this.dataList[2].data.reduce((sum, cur)=> {return sum+cur.length}, 0)\r\n\t\t\t\tthis.$set(this.navList[4], 'count', this.navList[4].count + jz_num)\r\n\t\t\t\tthis.$set(this.navList[3], 'count', this.navList[3].count + zj_num)\r\n\t\t\t\tthis.$set(this.navList[5], 'count', this.navList[5].count + pr_num)\r\n\t\t\t\tthis.$set(this.navList[1], 'count', this.navList[1].count + q_num)\r\n\t\t\t\tthis.$set(this.navList[2], 'count', this.navList[2].count + v_num)\r\n\t\t\t\tlet sum = jz_num + zj_num + pr_num + q_num + v_num\r\n\t\t\t\tthis.$set(this.navList[0], 'count', this.navList[0].count + sum)\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tasync handleSearchUserAll(name) {\r\n\t\t\t\tlet [res1, res2, res3] = await Promise.all([\r\n\t\t\t\t\tthis.$https.get(`/Home/Jzbxcx/ku_list?cate=1&keywords=${name}&p=${this.allUserRes[0].p}`),\r\n\t\t\t\t\tthis.$https.get(`/Home/Jzbxcx/ku_list?cate=2&keywords=${name}&p=${this.allUserRes[1].p}`),\r\n\t\t\t\t\tthis.$https.get(`/Home/Jzbxcx/ku_list?cate=3&keywords=${name}&p=${this.allUserRes[2].p}`),\r\n\t\t\t\t])\r\n\t\t\t\tthis.isAnalyse(0, res1.data)\r\n\t\t\t\tthis.isAnalyse(1, res2.data)\r\n\t\t\t\tthis.isAnalyse(2, res3.data)\r\n\t\t\t},\r\n\t\t\tisAnalyse (index, data) {\r\n\t\t\t\tlet obj = {p: 1, endFlag: data.pages == 1? true :false, loading: false, list: []}\r\n\t\t\t\tthis.$set(this.allUserRes, index, {...obj, ...data})\r\n\t\t\t},\r\n\t\t\tasync handleSearchUser(keywords) {\r\n\t\t\t\tlet uRes = await this.search('/Home/Jzbxcx/name_search_user', {keywords})\r\n\t\t\t\tif(uRes.data.code == 1) {\r\n\t\t\t\t\tthis.$set(this.dataList[0], 'data', uRes.data.list)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync handleSearchQuestions(keywords) {\r\n\t\t\t\tlet res = await this.search('/Home/Jzbxcx/questions_search', {p: this.dataList[1].p, keywords})\r\n\t\t\t\tif(res.data.code == 1) {\r\n\t\t\t\t\tlet resData = res.data.list.map(ele => {\r\n\t\t\t\t\t\tlet arr = ele.reply_list.filter(el => el.zt == 2)\r\n\t\t\t\t\t\tele.ansNum = Number(ele.comment_num) + arr.length\r\n\t\t\t\t\t\treturn ele\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif(res.data.pages == 0 || res.data.pages == this.dataList[1].p) this.$set(this.dataList[1], 'endFlag', true)\r\n\t\t\t\t\tthis.dataList[1].data.push(resData)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync handleSearchViewpoint(keywords) {\r\n\t\t\t\tlet res = await this.search('/Home/Jzbxcx/viewpoint_search', {p: this.dataList[2].p, keywords})\r\n\t\t\t\tif(res.data.code == 1) {\r\n\t\t\t\t\tlet resData = res.data.list.map(ele => {\r\n\t\t\t\t\t\tele.ansNum = ele.reply_num\r\n\t\t\t\t\t\treturn ele\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif(res.data.pages == this.dataList[2].p) this.$set(this.dataList[2], 'endFlag', true)\r\n\t\t\t\t\tthis.dataList[2].data.push(resData)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleToWebview() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/pages/webViewPath/webViewPath?url=https://www.100ec.cn/enterprise/#/Inside`,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tres.eventChannel.emit('setParams', { params: `?name=${this.cpyRes.name}` })\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.s {\r\n\t\t.s-w {\r\n\t\t\tpadding: 20rpx;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tborder-bottom: 1rpx solid #f8f8f8;\r\n\t\t}\r\n\t\t\r\n\t\t.res {\r\n\t\t\t.hide {\r\n\t\t\t\tdisplay: none;\r\n\t\t\t}\r\n\t\t\t.card-box {\r\n\t\t\t\tpadding: 10rpx;\r\n\t\t\t\t.icard {\r\n\t\t\t\t\tbackground-color: #fff;\r\n\t\t\t\t\tborder-radius: 20rpx;\r\n\t\t\t\t\t.title {\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\theight: 80rpx;\r\n\t\t\t\t\t\tpadding: 0 20rpx;\r\n\t\t\t\t\t\tborder-bottom: 1rpx solid #f8f8f8;\r\n\t\t\t\t\t\t.item-main {\r\n\t\t\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t.content {\r\n\t\t\t\t\t\tpadding: 20rpx;\r\n\t\t\t\t\t\t.cpy-info {\r\n\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\talign-items: baseline;\r\n\t\t\t\t\t\t\tmargin-bottom: 16rpx;\r\n\t\t\t\t\t\t\t.cpy-name {\r\n\t\t\t\t\t\t\t\tcolor: $jzb-theme-color;\r\n\t\t\t\t\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t.cpy-main {\r\n\t\t\t\t\t\t\t\tcolor: #999;\r\n\t\t\t\t\t\t\t\tmargin-left: 10rpx;\r\n\t\t\t\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t.cpy-icon {\r\n\t\t\t\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t\t\t\ttext-align: right;\r\n\t\t\t\t\t\t\t\tpadding-right: 10rpx;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t.cpy-content {\r\n\t\t\t\t\t\t\t\tcolor: #999;\r\n\t\t\t\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n</style>\r\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./searchRes.vue?vue&type=style&index=0&id=ee20fa10&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./searchRes.vue?vue&type=style&index=0&id=ee20fa10&lang=scss&scoped=true&\"","import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/searchRes/searchRes.vue'\ncreatePage(Page)"],"sourceRoot":""}